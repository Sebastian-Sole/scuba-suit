# Store Page Implementation Plan

## Overview

Implement a fully functional scuba diving equipment store page for the Dive Intel application. The page will feature a responsive sidebar with filtering capabilities and a product grid displaying scuba gear with placeholder images.

## Current State Analysis

**Existing Infrastructure:**
- Store route exists at `src/routes/store.tsx` with basic placeholder content (lines 7-14)
- TanStack Router is used for routing (not Next.js)
- Tailwind CSS v4 with custom theme tokens in `src/styles.css`
- shadcn/ui component pattern with existing components in `src/components/ui/`
- Lucide React icons already installed
- Responsive navbar with mobile sheet pattern already implemented in `src/components/Navbar.tsx`

**What's Missing:**
- Sidebar component with category/price/brand filters
- ProductCard component for individual product display
- ProductGrid component to layout products
- Product data structure and filtering logic
- Mobile responsive sidebar (drawer pattern)
- Integration with the store route

**Key Constraints:**
- Must use TanStack Router patterns (not Next.js `next/image`)
- Must follow existing component patterns (shadcn/ui style)
- Must match existing theme tokens and styling approach
- Must work with Vite bundler

## Desired End State

A complete store page with:
1. **Desktop View**: Persistent sidebar on left with filters, product grid on right
2. **Mobile View**: Hidden sidebar accessible via toggle button, full-width product grid
3. **Filtering**: Categories, price ranges, and brands filter products on the same page
4. **Visual Polish**: Hover effects, transitions, proper spacing matching the v0 design
5. **Placeholder Images**: Products display with scuba-themed placeholder images

### Verification Criteria:
- Navigate to `/store` and see sidebar + product grid
- Click category/price/brand filters and see product grid update
- Resize browser to mobile width and see sidebar hide with toggle button
- Click product cards and see hover effects
- All placeholder images load correctly

## What We're NOT Doing

- Actual e-commerce functionality (cart, checkout, payments)
- Backend API integration or database
- User authentication for purchases
- Product detail pages
- Search functionality within the store
- Sorting options (price, name, etc.)
- Pagination (keeping all 8 products on one page)

## Implementation Approach

Build components bottom-up, starting with the smallest reusable pieces (ProductCard), then composing them into larger structures (ProductGrid, Sidebar), and finally integrating into the Store page route. Use React state for client-side filtering. Follow the mobile-first responsive pattern established in the existing Navbar component.

---

## Phase 1: Create Product Type and Data

### Overview
Define TypeScript types and sample product data to establish the data structure for the store.

### Changes Required:

#### 1. Product Types and Mock Data

**File**: `src/lib/products.ts` (new file)
**Changes**: Create product type definition and sample data array

```typescript
export interface Product {
  id: number
  name: string
  price: number
  image: string
  category: string
  brand: string
}

export const products: Product[] = [
  {
    id: 1,
    name: 'Pro Dive Mask',
    price: 129.99,
    image: 'https://placehold.co/600x600/0891b2/white?text=Dive+Mask',
    category: 'Diving Masks',
    brand: 'Aqua Lung',
  },
  {
    id: 2,
    name: 'Elite Regulator',
    price: 449.99,
    image: 'https://placehold.co/600x600/0e7490/white?text=Regulator',
    category: 'Regulators',
    brand: 'Scubapro',
  },
  {
    id: 3,
    name: 'Tech BCD',
    price: 699.99,
    image: 'https://placehold.co/600x600/155e75/white?text=BCD',
    category: 'BCDs',
    brand: 'Mares',
  },
  {
    id: 4,
    name: 'Thermal Wetsuit',
    price: 299.99,
    image: 'https://placehold.co/600x600/0c4a6e/white?text=Wetsuit',
    category: 'Wetsuits',
    brand: 'Cressi',
  },
  {
    id: 5,
    name: 'Carbon Fiber Fins',
    price: 189.99,
    image: 'https://placehold.co/600x600/0891b2/white?text=Fins',
    category: 'Fins',
    brand: 'Scubapro',
  },
  {
    id: 6,
    name: 'Smart Dive Computer',
    price: 549.99,
    image: 'https://placehold.co/600x600/0e7490/white?text=Computer',
    category: 'Dive Computers',
    brand: 'Aqua Lung',
  },
  {
    id: 7,
    name: 'Premium Snorkel',
    price: 59.99,
    image: 'https://placehold.co/600x600/155e75/white?text=Snorkel',
    category: 'Accessories',
    brand: 'Mares',
  },
  {
    id: 8,
    name: 'Dive Light Pro',
    price: 179.99,
    image: 'https://placehold.co/600x600/0c4a6e/white?text=Light',
    category: 'Accessories',
    brand: 'Cressi',
  },
]

export const categories = [
  'Diving Masks',
  'Regulators',
  'BCDs',
  'Wetsuits',
  'Fins',
  'Dive Computers',
  'Accessories',
]

export const priceRanges = [
  { name: 'Under $100', min: 0, max: 100 },
  { name: '$100 - $300', min: 100, max: 300 },
  { name: '$300 - $600', min: 300, max: 600 },
  { name: 'Over $600', min: 600, max: Infinity },
]

export const brands = ['Aqua Lung', 'Scubapro', 'Mares', 'Cressi']
```

### Success Criteria:

#### Automated Verification:
- [x] TypeScript compilation succeeds: `pnpm build`
- [x] No linting errors: `pnpm lint`

#### Manual Verification:
- [x] File `src/lib/products.ts` exists and exports all required constants

---

## Phase 2: Create ProductCard Component

### Overview
Build the individual product card component that displays product image, name, and price with hover effects.

### Changes Required:

#### 1. ProductCard Component

**File**: `src/components/ProductCard.tsx` (new file)
**Changes**: Create reusable product card component

```typescript
import type { Product } from '@/lib/products'
import { cn } from '@/lib/utils'

interface ProductCardProps {
  product: Product
}

export function ProductCard({ product }: ProductCardProps) {
  return (
    <div className="group cursor-pointer">
      <div className="relative aspect-square overflow-hidden rounded-lg bg-muted mb-4">
        <img
          src={product.image}
          alt={product.name}
          className="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"
        />
      </div>

      <div className="space-y-1">
        <h3 className="font-medium text-foreground">{product.name}</h3>
        <p className="text-lg font-semibold text-primary">${product.price.toFixed(2)}</p>
      </div>
    </div>
  )
}
```

### Success Criteria:

#### Automated Verification:
- [x] TypeScript compilation succeeds: `pnpm build`
- [x] No linting errors: `pnpm lint`

#### Manual Verification:
- [x] Component file exists and exports ProductCard
- [x] Component accepts Product type as prop

---

## Phase 3: Create ProductGrid Component

### Overview
Build the product grid layout component that receives filtered products and displays them in a responsive grid.

### Changes Required:

#### 1. ProductGrid Component

**File**: `src/components/ProductGrid.tsx` (new file)
**Changes**: Create grid layout for products

```typescript
import { ProductCard } from '@/components/ProductCard'
import type { Product } from '@/lib/products'

interface ProductGridProps {
  products: Product[]
}

export function ProductGrid({ products }: ProductGridProps) {
  return (
    <div>
      <div className="mb-8">
        <h2 className="text-3xl font-semibold text-foreground mb-2">Scuba Gear</h2>
        <p className="text-muted-foreground">{products.length} products</p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8">
        {products.map((product) => (
          <ProductCard key={product.id} product={product} />
        ))}
      </div>
    </div>
  )
}
```

### Success Criteria:

#### Automated Verification:
- [x] TypeScript compilation succeeds: `pnpm build`
- [x] No linting errors: `pnpm lint`

#### Manual Verification:
- [x] Component file exists and exports ProductGrid
- [x] Component accepts products array as prop

---

## Phase 4: Create StoreSidebar Component

### Overview
Build the sidebar component with category, price, and brand filters. Include mobile responsive behavior.

### Changes Required:

#### 1. StoreSidebar Component

**File**: `src/components/StoreSidebar.tsx` (new file)
**Changes**: Create sidebar with filter sections

```typescript
import { Waves } from 'lucide-react'
import { categories, priceRanges, brands } from '@/lib/products'
import { cn } from '@/lib/utils'

interface StoreSidebarProps {
  selectedCategory: string | null
  selectedPriceRange: string | null
  selectedBrand: string | null
  onCategoryChange: (category: string | null) => void
  onPriceRangeChange: (range: string | null) => void
  onBrandChange: (brand: string | null) => void
}

export function StoreSidebar({
  selectedCategory,
  selectedPriceRange,
  selectedBrand,
  onCategoryChange,
  onPriceRangeChange,
  onBrandChange,
}: StoreSidebarProps) {
  return (
    <aside className="w-full md:w-64 bg-sidebar p-6 overflow-y-auto border-r border-sidebar-border">
      <div className="mb-8">
        <div className="flex items-center gap-2 mb-8">
          <Waves className="w-8 h-8 text-primary" />
          <h1 className="text-xl font-semibold text-sidebar-foreground">DeepDive</h1>
        </div>

        <nav className="space-y-8">
          <div>
            <h2 className="text-sm font-medium text-sidebar-foreground mb-3">Categories</h2>
            <ul className="space-y-2">
              <li>
                <button
                  onClick={() => onCategoryChange(null)}
                  className={cn(
                    "text-sm text-left w-full transition-colors",
                    selectedCategory === null
                      ? "text-sidebar-foreground font-medium"
                      : "text-muted-foreground hover:text-sidebar-foreground"
                  )}
                >
                  All Categories
                </button>
              </li>
              {categories.map((category) => (
                <li key={category}>
                  <button
                    onClick={() => onCategoryChange(category)}
                    className={cn(
                      "text-sm text-left w-full transition-colors",
                      selectedCategory === category
                        ? "text-sidebar-foreground font-medium"
                        : "text-muted-foreground hover:text-sidebar-foreground"
                    )}
                  >
                    {category}
                  </button>
                </li>
              ))}
            </ul>
          </div>

          <div>
            <h2 className="text-sm font-medium text-sidebar-foreground mb-3">Price</h2>
            <ul className="space-y-2">
              <li>
                <button
                  onClick={() => onPriceRangeChange(null)}
                  className={cn(
                    "text-sm text-left w-full transition-colors",
                    selectedPriceRange === null
                      ? "text-sidebar-foreground font-medium"
                      : "text-muted-foreground hover:text-sidebar-foreground"
                  )}
                >
                  All Prices
                </button>
              </li>
              {priceRanges.map((range) => (
                <li key={range.name}>
                  <button
                    onClick={() => onPriceRangeChange(range.name)}
                    className={cn(
                      "text-sm text-left w-full transition-colors",
                      selectedPriceRange === range.name
                        ? "text-sidebar-foreground font-medium"
                        : "text-muted-foreground hover:text-sidebar-foreground"
                    )}
                  >
                    {range.name}
                  </button>
                </li>
              ))}
            </ul>
          </div>

          <div>
            <h2 className="text-sm font-medium text-sidebar-foreground mb-3">Brands</h2>
            <ul className="space-y-2">
              <li>
                <button
                  onClick={() => onBrandChange(null)}
                  className={cn(
                    "text-sm text-left w-full transition-colors",
                    selectedBrand === null
                      ? "text-sidebar-foreground font-medium"
                      : "text-muted-foreground hover:text-sidebar-foreground"
                  )}
                >
                  All Brands
                </button>
              </li>
              {brands.map((brand) => (
                <li key={brand}>
                  <button
                    onClick={() => onBrandChange(brand)}
                    className={cn(
                      "text-sm text-left w-full transition-colors",
                      selectedBrand === brand
                        ? "text-sidebar-foreground font-medium"
                        : "text-muted-foreground hover:text-sidebar-foreground"
                    )}
                  >
                    {brand}
                  </button>
                </li>
              ))}
            </ul>
          </div>
        </nav>
      </div>
    </aside>
  )
}
```

### Success Criteria:

#### Automated Verification:
- [x] TypeScript compilation succeeds: `pnpm build`
- [x] No linting errors: `pnpm lint`

#### Manual Verification:
- [x] Component file exists and exports StoreSidebar
- [x] Component renders all filter sections
- [x] All filter callback props are properly typed

---

## Phase 5: Update Store Route with Filtering Logic

### Overview
Integrate all components into the store page route, add filtering state management, and implement responsive sidebar toggle.

### Changes Required:

#### 1. Store Page Component

**File**: `src/routes/store.tsx`
**Changes**: Replace placeholder with full store implementation

```typescript
import { createFileRoute } from '@tanstack/react-router'
import { useState, useMemo } from 'react'
import { Menu, X } from 'lucide-react'
import { StoreSidebar } from '@/components/StoreSidebar'
import { ProductGrid } from '@/components/ProductGrid'
import { Button } from '@/components/ui/button'
import { Sheet, SheetContent, SheetHeader, SheetTitle, SheetTrigger } from '@/components/ui/sheet'
import { products, priceRanges } from '@/lib/products'

export const Route = createFileRoute('/store')({
  component: StorePage,
})

function StorePage() {
  const [selectedCategory, setSelectedCategory] = useState<string | null>(null)
  const [selectedPriceRange, setSelectedPriceRange] = useState<string | null>(null)
  const [selectedBrand, setSelectedBrand] = useState<string | null>(null)
  const [isSidebarOpen, setIsSidebarOpen] = useState(false)

  const filteredProducts = useMemo(() => {
    return products.filter((product) => {
      // Filter by category
      if (selectedCategory && product.category !== selectedCategory) {
        return false
      }

      // Filter by price range
      if (selectedPriceRange) {
        const range = priceRanges.find((r) => r.name === selectedPriceRange)
        if (range && (product.price < range.min || product.price >= range.max)) {
          return false
        }
      }

      // Filter by brand
      if (selectedBrand && product.brand !== selectedBrand) {
        return false
      }

      return true
    })
  }, [selectedCategory, selectedPriceRange, selectedBrand])

  return (
    <div className="flex min-h-full">
      {/* Mobile Sidebar Toggle */}
      <Sheet open={isSidebarOpen} onOpenChange={setIsSidebarOpen}>
        <SheetTrigger asChild className="md:hidden fixed top-20 left-4 z-40">
          <Button variant="outline" size="icon">
            <Menu className="h-5 w-5" />
          </Button>
        </SheetTrigger>
        <SheetContent side="left" className="w-80 p-0">
          <StoreSidebar
            selectedCategory={selectedCategory}
            selectedPriceRange={selectedPriceRange}
            selectedBrand={selectedBrand}
            onCategoryChange={setSelectedCategory}
            onPriceRangeChange={setSelectedPriceRange}
            onBrandChange={setSelectedBrand}
          />
        </SheetContent>
      </Sheet>

      {/* Desktop Sidebar */}
      <div className="hidden md:block">
        <StoreSidebar
          selectedCategory={selectedCategory}
          selectedPriceRange={selectedPriceRange}
          selectedBrand={selectedBrand}
          onCategoryChange={setSelectedCategory}
          onPriceRangeChange={setSelectedPriceRange}
          onBrandChange={setSelectedBrand}
        />
      </div>

      {/* Main Content */}
      <main className="flex-1 p-6 md:p-8 lg:p-12">
        <ProductGrid products={filteredProducts} />
      </main>
    </div>
  )
}
```

### Success Criteria:

#### Automated Verification:
- [x] TypeScript compilation succeeds: `pnpm build`
- [x] No linting errors: `pnpm lint`
- [x] Development server runs without errors: `pnpm dev`

#### Manual Verification:
- [ ] Navigate to `/store` and see sidebar and product grid
- [ ] Desktop: sidebar is always visible on the left
- [ ] Mobile: sidebar is hidden, toggle button appears
- [ ] Click toggle button on mobile and sidebar opens in sheet
- [ ] Click category filter and see products filter correctly
- [ ] Click price range filter and see products filter correctly
- [ ] Click brand filter and see products filter correctly
- [ ] Multiple filters work together (category + price + brand)
- [ ] Click "All Categories/Prices/Brands" and filters reset correctly
- [ ] Product count updates to reflect filtered results
- [ ] Hover over product cards and see scale animation
- [ ] All placeholder images load successfully

---

## Testing Strategy

### Unit Tests:
- Test filtering logic with different combinations of filters
- Verify product count calculation
- Test that filters correctly combine (AND logic)

### Integration Tests:
- Test sidebar filter interactions update product grid
- Test mobile sheet opens and closes correctly
- Test responsive breakpoints hide/show sidebar

### Manual Testing Steps:
1. **Desktop View Testing:**
   - Open `/store` on desktop width (>768px)
   - Verify sidebar is visible on the left
   - Verify all 8 products display in 2-column grid
   - Click each category and verify correct products show
   - Click each price range and verify correct products show
   - Click each brand and verify correct products show
   - Combine filters (e.g., "Accessories" + "Under $100") and verify results

2. **Mobile View Testing:**
   - Resize browser to mobile width (<768px)
   - Verify sidebar is hidden
   - Verify toggle button appears (top-left area)
   - Click toggle button and verify sidebar opens as sheet
   - Apply filters from mobile sidebar
   - Verify product grid updates correctly
   - Close sidebar and verify filters persist

3. **Visual Testing:**
   - Hover over product cards and verify smooth scale animation
   - Check spacing and alignment matches design
   - Verify images load and display correctly
   - Test in light and dark mode
   - Check text readability and contrast

4. **Filter Logic Testing:**
   - Select "Diving Masks" category → should show only "Pro Dive Mask"
   - Select "Under $100" price → should show only "Premium Snorkel"
   - Select "Scubapro" brand → should show "Elite Regulator" and "Carbon Fiber Fins"
   - Combine all three filters → may show 0 products (expected)
   - Reset all filters → should show all 8 products again

## Performance Considerations

- **Image Loading**: Using external placeholder service (placehold.co) with consistent dimensions (600x600)
- **Filtering Performance**: useMemo hook ensures filtering only runs when dependencies change
- **Component Rerenders**: React.memo could be added to ProductCard if performance issues arise (not implemented initially)
- **Mobile Performance**: Sheet component from shadcn/ui is already optimized

## Migration Notes

Not applicable - this is a new feature with no existing data to migrate.

## References

- Original request: User-provided v0 Next.js components (converted to TanStack Router patterns)
- Similar pattern: `src/components/Navbar.tsx` (mobile sheet implementation)
- Theme tokens: `src/styles.css` (sidebar color variables)
- Component pattern: `src/components/ui/button.tsx` (shadcn/ui style)
