# SEO-Friendly Landing Page Implementation Plan

## Overview

Transform the current application structure to improve SEO discoverability for scuba diving-related searches by creating a dedicated landing page at `/` with rich, keyword-optimized content. The existing map functionality will move to `/map`, and the search interface will become the primary CTA on the landing page.

## Current State Analysis

**Existing Implementation:**
- Home route (`/`) at `src/routes/index.tsx:20-237` contains the full MapPage component
- SearchBar component shows in navbar via NavbarContext on map page
- Basic SEO meta tags exist in `src/routes/__root.tsx:22-28`
- TanStack Router handles routing with file-based route structure
- Navbar at `src/components/Navbar.tsx` has links to Map, About, Store

**Key Constraints:**
- Must maintain existing map functionality without breaking changes
- SearchBar should only appear in navbar on `/map` route
- Need to preserve URL structure for map with search params (`?lat=...&lon=...&datetime=...`)

## Desired End State

A two-page structure where:
1. **Landing page (`/`)**: SEO-optimized content page with search CTA that redirects to map
2. **Map page (`/map`)**: Current full map functionality with SearchBar in navbar

### Success Verification:
- Navigate to `/` shows landing page with search input
- Searching on landing page redirects to `/map` with proper params
- Map page at `/map` shows SearchBar in navbar
- Landing page does NOT show SearchBar in navbar
- All existing map functionality works identically
- Page metadata includes comprehensive scuba diving keywords

## What We're NOT Doing

- NOT redesigning the map interface or data visualization
- NOT changing the About or Store pages
- NOT modifying the SearchBar component behavior
- NOT implementing analytics or tracking (can be added later)
- NOT adding authentication or user accounts
- NOT implementing blog or CMS functionality

## Implementation Approach

Create new landing page route, move map to `/map`, conditionally render SearchBar only on map route, and enhance SEO metadata. Use a phased approach to ensure no breaking changes.

---

## Phase 1: Create Map Route Structure

### Overview

Move existing map functionality from `/` to `/map` route, preserving all functionality and URL parameters.

### Changes Required:

#### 1. Create Map Route File

**File**: `src/routes/map.tsx`
**Changes**: Copy entire contents from `src/routes/index.tsx` and update route definition

```tsx
import { createFileRoute, useNavigate, useSearch } from '@tanstack/react-router'
// ... all existing imports from index.tsx ...

// URL search params schema (same as before)
const searchSchema = z.object({
  lat: z.number().optional(),
  lon: z.number().optional(),
  datetime: z.string().optional(),
})

export const Route = createFileRoute('/map')({
  component: MapPage,
  validateSearch: searchSchema,
})

// ... rest of MapPage component exactly as is ...
```

**Rationale**: Keep all map logic intact, just change the route path from '/' to '/map'.

#### 2. Update Route References in MapPage

**File**: `src/routes/map.tsx`
**Changes**: Update `useSearch` hook to reference new route

```tsx
function MapPage() {
  const navigate = useNavigate()
  const searchParams = useSearch({ from: '/map' }) // Changed from '/'
  // ... rest stays the same ...
}
```

### Success Criteria:

#### Automated Verification:
- [x] TypeScript compilation passes: `pnpm build`
- [x] No linting errors: `pnpm lint`
- [x] Route tree regenerates correctly

#### Manual Verification:
- [ ] Navigate to `/map` and map renders correctly
- [ ] URL parameters work: `/map?lat=36.7783&lon=-119.4179&datetime=2025-01-15T12:00:00`
- [ ] SearchBar appears in navbar on map page
- [ ] Map click updates URL correctly
- [ ] Date/time picker updates work
- [ ] Location search and selection functions properly

---

## Phase 2: Create Landing Page Component

### Overview

Build new landing page with SEO-optimized content, hero section, and search CTA that redirects to map.

### Changes Required:

#### 1. Create Landing Page Route

**File**: `src/routes/index.tsx`
**Changes**: Replace with new landing page component

```tsx
import { createFileRoute, useNavigate } from '@tanstack/react-router'
import { useState } from 'react'
import { Search, Thermometer, MapPin, Calendar } from 'lucide-react'

export const Route = createFileRoute('/')({
  component: LandingPage,
})

interface SearchResult {
  lat: number
  lon: number
  display: string
}

function LandingPage() {
  const navigate = useNavigate()
  const [query, setQuery] = useState('')
  const [results, setResults] = useState<SearchResult[]>([])
  const [isSearching, setIsSearching] = useState(false)
  const [showResults, setShowResults] = useState(false)

  const handleSearch = async (q: string) => {
    if (!q.trim()) {
      setResults([])
      setShowResults(false)
      return
    }

    setIsSearching(true)
    try {
      const response = await fetch(`/api/geocode?q=${encodeURIComponent(q)}`)
      if (!response.ok) throw new Error('Search failed')
      const data = await response.json()
      setResults(data.locations || [])
      setShowResults(true)
    } catch (err) {
      console.error('Search error:', err)
      setResults([])
    } finally {
      setIsSearching(false)
    }
  }

  const handleSelectLocation = (lat: number, lon: number) => {
    // Get today's date at noon
    const today = new Date().toISOString().split('T')[0]
    const datetime = `${today}T12:00:00`

    // Navigate to map with location
    navigate({
      to: '/map',
      search: { lat, lon, datetime }
    })
  }

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    handleSearch(query)
  }

  return (
    <div className="h-full overflow-y-auto">
      {/* Hero Section */}
      <section className="relative bg-gradient-to-br from-cyan-600 to-blue-800 text-white">
        <div className="absolute inset-0 bg-[url('/ocean-pattern.svg')] opacity-10" />
        <div className="relative container mx-auto px-4 py-16 md:py-24">
          <div className="max-w-3xl mx-auto text-center">
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-bold mb-6">
              Plan Your Perfect Scuba Diving Trip
            </h1>
            <p className="text-xl md:text-2xl mb-8 text-cyan-50">
              Get real ocean temperature data and wetsuit recommendations for any dive location worldwide
            </p>

            {/* Search Input CTA */}
            <div className="bg-white rounded-xl shadow-2xl p-6 max-w-2xl mx-auto">
              <form onSubmit={handleSubmit} className="relative">
                <label htmlFor="location-search" className="block text-left text-gray-700 font-medium mb-2">
                  Where are you diving?
                </label>
                <div className="flex gap-2">
                  <div className="relative flex-1">
                    <input
                      id="location-search"
                      type="text"
                      value={query}
                      onChange={(e) => {
                        setQuery(e.target.value)
                        handleSearch(e.target.value)
                      }}
                      onFocus={() => results.length > 0 && setShowResults(true)}
                      placeholder="Enter a city, beach, or dive site..."
                      className="w-full px-4 py-3 text-base text-gray-900 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"
                    />
                    {showResults && results.length > 0 && (
                      <div className="absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-lg border z-50 max-h-64 overflow-y-auto">
                        {results.map((result, i) => (
                          <button
                            key={i}
                            type="button"
                            onClick={() => {
                              handleSelectLocation(result.lat, result.lon)
                              setShowResults(false)
                            }}
                            className="w-full px-4 py-3 text-left hover:bg-gray-50 border-b last:border-b-0 transition-colors"
                          >
                            <div className="text-sm font-medium text-gray-900">{result.display}</div>
                            <div className="text-xs text-gray-500">
                              {result.lat.toFixed(4)}, {result.lon.toFixed(4)}
                            </div>
                          </button>
                        ))}
                      </div>
                    )}
                  </div>
                  <button
                    type="submit"
                    disabled={isSearching || !query.trim()}
                    className="px-6 py-3 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2"
                  >
                    <Search className="h-5 w-5" />
                    <span className="hidden sm:inline">Search</span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>

      {/* Features Section */}
      <section className="py-16 md:py-24 bg-background">
        <div className="container mx-auto px-4">
          <h2 className="text-3xl md:text-4xl font-bold text-center mb-12">
            Everything You Need to Plan Your Dive
          </h2>
          <div className="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
            {/* Feature 1 */}
            <div className="text-center">
              <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-cyan-100 text-cyan-600 mb-4">
                <Thermometer className="h-8 w-8" />
              </div>
              <h3 className="text-xl font-semibold mb-3">Accurate Temperature Data</h3>
              <p className="text-muted-foreground">
                Access historical ocean temperature data for any location worldwide. See 7-year trends and 7-day forecasts to plan the perfect dive.
              </p>
            </div>

            {/* Feature 2 */}
            <div className="text-center">
              <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 text-blue-600 mb-4">
                <MapPin className="h-8 w-8" />
              </div>
              <h3 className="text-xl font-semibold mb-3">Global Dive Site Coverage</h3>
              <p className="text-muted-foreground">
                Search any dive location, from tropical reefs to cold water wrecks. Get precise temperature data for your exact coordinates.
              </p>
            </div>

            {/* Feature 3 */}
            <div className="text-center">
              <div className="inline-flex items-center justify-center w-16 h-16 rounded-full bg-teal-100 text-teal-600 mb-4">
                <Calendar className="h-8 w-8" />
              </div>
              <h3 className="text-xl font-semibold mb-3">Smart Trip Planning</h3>
              <p className="text-muted-foreground">
                Compare temperatures across different dates and times. Find the best season for your scuba diving adventure.
              </p>
            </div>
          </div>
        </div>
      </section>

      {/* Info Section */}
      <section className="py-16 md:py-24 bg-muted/50">
        <div className="container mx-auto px-4 max-w-4xl">
          <h2 className="text-3xl md:text-4xl font-bold mb-8">
            Choose the Right Wetsuit for Your Dive
          </h2>
          <div className="prose prose-lg max-w-none">
            <p className="text-lg text-muted-foreground mb-6">
              Water temperature is crucial for scuba diving comfort and safety. Whether you're planning a tropical dive vacation or exploring local cold-water sites, knowing the exact ocean temperature helps you pack the right gear.
            </p>
            <p className="text-lg text-muted-foreground mb-6">
              Dive Intel provides accurate sea surface temperature data from NOAA satellites, giving you reliable information for wetsuit selection, drysuit planning, and overall dive preparation. Our tool shows both historical temperature trends and upcoming forecasts, so you can plan your scuba diving trips with confidence.
            </p>
            <div className="bg-background rounded-lg p-6 border">
              <h3 className="text-xl font-semibold mb-4">Common Wetsuit Thickness Guidelines</h3>
              <ul className="space-y-2 text-muted-foreground">
                <li><strong>Above 80°F (27°C):</strong> Shorty wetsuit or rash guard</li>
                <li><strong>75-80°F (24-27°C):</strong> 3mm full wetsuit</li>
                <li><strong>65-75°F (18-24°C):</strong> 5mm wetsuit</li>
                <li><strong>50-65°F (10-18°C):</strong> 7mm wetsuit or semi-dry suit</li>
                <li><strong>Below 50°F (10°C):</strong> Drysuit recommended</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      {/* CTA Section */}
      <section className="py-16 md:py-24 bg-gradient-to-br from-cyan-600 to-blue-800 text-white">
        <div className="container mx-auto px-4 text-center">
          <h2 className="text-3xl md:text-4xl font-bold mb-4">
            Ready to Plan Your Next Dive?
          </h2>
          <p className="text-xl mb-8 text-cyan-50 max-w-2xl mx-auto">
            Get instant temperature data and gear recommendations for any dive location
          </p>
          <button
            onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
            className="px-8 py-4 bg-white text-cyan-600 rounded-lg hover:bg-gray-100 transition-colors font-semibold text-lg"
          >
            Search Dive Locations
          </button>
        </div>
      </section>
    </div>
  )
}
```

**Rationale**:
- Simplified search component (no date picker on landing page)
- Rich content with scuba diving keywords throughout
- Clean hero with gradient background (minimal but appealing)
- Feature section with icons (Thermometer, MapPin, Calendar from lucide-react)
- Educational content about wetsuit selection
- Multiple CTAs directing users to search functionality

### Success Criteria:

#### Automated Verification:
- [ ] TypeScript compilation passes: `pnpm build`
- [ ] No linting errors: `pnpm lint`

#### Manual Verification:
- [ ] Landing page renders at `/` with hero section
- [ ] Search input is visible and functional
- [ ] Typing in search shows location suggestions
- [ ] Clicking a location navigates to `/map` with correct params
- [ ] Feature icons display correctly
- [ ] Page is scrollable and all sections visible
- [ ] Responsive design works on mobile

---

## Phase 3: Update Navbar Context Logic

### Overview

Modify NavbarContext logic so SearchBar only appears in navbar on `/map` route, not on landing page.

### Changes Required:

#### 1. Update Navbar to Check Route

**File**: `src/components/Navbar.tsx`
**Changes**: Add route checking to conditionally render navbar content

```tsx
import { Link, useRouterState } from '@tanstack/react-router' // Add useRouterState
// ... existing imports ...

export default function Navbar() {
  const [isOpen, setIsOpen] = useState(false)
  const { navbarContent } = useNavbarContent()
  const routerState = useRouterState()

  // Only show navbar content on /map route
  const showNavbarContent = routerState.location.pathname === '/map'

  return (
    <header className="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <div className="container flex min-h-16 items-center gap-4 py-3 px-4 md:px-8">
        {/* Mobile Menu */}
        <Sheet open={isOpen} onOpenChange={setIsOpen}>
          {/* ... existing mobile menu ... */}

          {/* Mobile search bar - only on map route */}
          {showNavbarContent && navbarContent && (
            <div className="mt-6 pb-4 border-b">{navbarContent}</div>
          )}

          {/* ... rest of mobile menu ... */}
        </Sheet>

        {/* Brand Name */}
        <Link to="/" className="font-bold text-xl shrink-0">
          Dive Intel
        </Link>

        {/* Desktop Navigation */}
        <div className="hidden md:flex md:flex-1 md:items-center md:justify-between">
          {/* ... existing nav links ... */}

          {/* Center: SearchBar - only on map route */}
          {showNavbarContent && navbarContent && (
            <div className="flex-1 max-w-2xl mx-6">{navbarContent}</div>
          )}

          {/* ... existing theme toggle ... */}
        </div>
      </div>
    </header>
  )
}
```

**Rationale**: Use router state to check current path and conditionally render SearchBar only on map route.

### Success Criteria:

#### Automated Verification:
- [ ] TypeScript compilation passes: `pnpm build`
- [ ] No linting errors: `pnpm lint`

#### Manual Verification:
- [ ] SearchBar appears in navbar when on `/map`
- [ ] SearchBar does NOT appear in navbar when on `/`
- [ ] SearchBar does NOT appear on `/about` or `/store`
- [ ] Mobile menu shows/hides search correctly based on route
- [ ] Navigation between routes works smoothly

---

## Phase 4: Enhanced SEO Metadata

### Overview

Add comprehensive SEO metadata including Open Graph tags, structured data, and keyword-rich descriptions optimized for scuba diving searches.

### Changes Required:

#### 1. Update Root Route Meta Tags

**File**: `src/routes/__root.tsx`
**Changes**: Enhance default meta tags with more comprehensive SEO

```tsx
export const Route = createRootRoute({
  head: () => ({
    meta: [
      {
        charSet: 'utf-8',
      },
      {
        name: 'viewport',
        content: 'width=device-width, initial-scale=1',
      },
      {
        title: 'Dive Intel - Scuba Diving Temperature Data & Wetsuit Recommendations',
      },
      {
        name: 'description',
        content:
          'Plan your scuba diving trips with accurate ocean temperature data and wetsuit recommendations for dive sites worldwide. Get historical trends and forecasts for perfect dive planning.',
      },
      {
        name: 'keywords',
        content:
          'scuba diving, ocean temperature, wetsuit recommendations, dive planning, sea temperature, dive sites, scuba gear, diving trip planner, water temperature forecast, diving suit guide',
      },
      // Open Graph tags
      {
        property: 'og:title',
        content: 'Dive Intel - Scuba Diving Temperature Data & Wetsuit Recommendations',
      },
      {
        property: 'og:description',
        content:
          'Get accurate ocean temperature data and wetsuit recommendations for any dive location worldwide. Plan your perfect scuba diving trip.',
      },
      {
        property: 'og:type',
        content: 'website',
      },
      // Twitter Card tags
      {
        name: 'twitter:card',
        content: 'summary_large_image',
      },
      {
        name: 'twitter:title',
        content: 'Dive Intel - Scuba Diving Temperature Data',
      },
      {
        name: 'twitter:description',
        content:
          'Get accurate ocean temperature data and wetsuit recommendations for dive sites worldwide.',
      },
    ],
    links: [
      {
        rel: 'stylesheet',
        href: appCss,
      },
    ],
  }),

  component: RootComponent,
  shellComponent: RootDocument,
})
```

**Rationale**: Enhanced metadata with keywords, Open Graph, and Twitter Card tags improves SEO and social sharing.

#### 2. Add Structured Data to Landing Page

**File**: `src/routes/index.tsx`
**Changes**: Add JSON-LD structured data for search engines

```tsx
export const Route = createFileRoute('/')({
  component: LandingPage,
  head: () => ({
    meta: [
      {
        title: 'Dive Intel - Plan Your Scuba Diving Trip with Temperature Data',
      },
      {
        name: 'description',
        content:
          'Find the perfect wetsuit for your next dive. Get real-time ocean temperature data, historical trends, and forecasts for scuba diving locations worldwide.',
      },
    ],
    scripts: [
      {
        type: 'application/ld+json',
        children: JSON.stringify({
          '@context': 'https://schema.org',
          '@type': 'WebApplication',
          name: 'Dive Intel',
          description:
            'Scuba diving trip planner with ocean temperature data and wetsuit recommendations',
          applicationCategory: 'UtilityApplication',
          offers: {
            '@type': 'Offer',
            price: '0',
            priceCurrency: 'USD',
          },
          featureList: [
            'Ocean temperature data',
            'Wetsuit recommendations',
            'Dive site search',
            'Historical temperature trends',
            'Temperature forecasts',
          ],
        }),
      },
    ],
  }),
})
```

**Rationale**: Structured data helps search engines understand the application and can enable rich snippets in search results.

### Success Criteria:

#### Automated Verification:
- [ ] TypeScript compilation passes: `pnpm build`
- [ ] No linting errors: `pnpm lint`
- [ ] HTML validates (check with W3C validator)

#### Manual Verification:
- [ ] View page source shows meta tags in `<head>`
- [ ] Open Graph tags visible when sharing on social media
- [ ] Structured data validates with Google Rich Results Test
- [ ] Page title and description appear correctly in search results preview
- [ ] Keywords are naturally distributed throughout page content

---

## Phase 5: Update Navigation Links

### Overview

Update Navbar navigation to reflect new route structure (Map instead of Home).

### Changes Required:

#### 1. Update Navbar Navigation Items

**File**: `src/components/Navbar.tsx`
**Changes**: Update navItems array to reflect new structure

```tsx
const navItems = [
  { to: '/', label: 'Home', icon: Home },
  { to: '/map', label: 'Map', icon: MapPin }, // Changed from '/' to '/map' and label from 'Map' to 'Map'
  { to: '/about', label: 'About', icon: Info },
  { to: '/store', label: 'Store', icon: ShoppingBag },
]
```

**Rationale**: Add explicit Home link now that landing page is separate from map, and update Map link to point to `/map`.

### Success Criteria:

#### Automated Verification:
- [ ] TypeScript compilation passes: `pnpm build`
- [ ] No linting errors: `pnpm lint`

#### Manual Verification:
- [ ] Navbar shows Home, Map, About, Store links
- [ ] Home link navigates to `/` (landing page)
- [ ] Map link navigates to `/map`
- [ ] Active link highlighting works correctly
- [ ] Mobile menu shows all links correctly

---

## Testing Strategy

### Unit Tests
Not required for this implementation as it's primarily UI and routing changes.

### Integration Tests
Focus on manual testing of navigation flow and search functionality.

### Manual Testing Steps

1. **Landing Page Verification:**
   - Visit `/` and verify landing page loads
   - Check that hero section, features, and info sections are visible
   - Verify gradient background appears
   - Test search input: type a location
   - Verify autocomplete suggestions appear
   - Click a suggestion and verify navigation to `/map` with params

2. **Map Page Verification:**
   - Visit `/map` directly and verify map loads
   - Verify SearchBar appears in navbar
   - Test map functionality: click on map, verify data loads
   - Test URL parameters: manually add `?lat=36&lon=-119&datetime=2025-01-15T12:00:00`
   - Verify all existing map features work

3. **Navigation Flow:**
   - Start on `/` (landing page)
   - Verify no SearchBar in navbar
   - Click "Map" in navbar
   - Verify SearchBar appears in navbar
   - Go back to Home
   - Verify SearchBar disappears

4. **SEO Verification:**
   - View page source on `/` and verify meta tags
   - Test with Google Rich Results Test
   - Check Open Graph tags with social media debugger
   - Verify page loads quickly (check Core Web Vitals)

5. **Responsive Testing:**
   - Test on mobile viewport
   - Verify mobile menu works
   - Test search on mobile
   - Verify hero section scales properly

6. **Cross-Browser Testing:**
   - Test in Chrome, Firefox, Safari
   - Verify gradient backgrounds render
   - Verify icons display correctly

## Performance Considerations

- **Lazy Loading**: Consider lazy loading the Map component since it's not needed on landing page
- **Image Optimization**: If adding hero background image later, use optimized formats (WebP)
- **Code Splitting**: TanStack Router already handles route-based code splitting
- **Initial Load**: Landing page should load quickly with minimal JavaScript
- **Search Debouncing**: Already implemented in search functionality (300ms)

## Migration Notes

**No Breaking Changes:**
- Existing `/` URLs will now show landing page instead of map
- Users with bookmarked map URLs will need to update to `/map`
- Consider adding a redirect from old URLs if analytics show significant traffic

**Optional Migration Step:**
- Add analytics to track which page users enter on
- Monitor bounce rate on landing page vs. map page
- A/B test different landing page copy

## References

- Current map implementation: `src/routes/index.tsx:1-237`
- SearchBar component: `src/components/SearchBar.tsx:1-190`
- Navbar component: `src/components/Navbar.tsx:1-126`
- Root route with meta tags: `src/routes/__root.tsx:1-80`
- TanStack Router file-based routing: https://tanstack.com/router/latest/docs/framework/react/guide/file-based-routing

## SEO Keywords Target List

Primary keywords to naturally include in content:
- Scuba diving
- Ocean temperature
- Wetsuit recommendations
- Dive planning / dive trip planning
- Sea surface temperature
- Dive sites / dive locations
- Scuba gear
- Water temperature
- Diving suit
- Drysuit
- Scuba diving trip
- Diving tools
- Temperature forecast
- Historical ocean data

## Additional Notes

**Future Enhancements (Out of Scope):**
- Blog section with diving tips
- User accounts and saved locations
- Social sharing buttons
- Reviews/testimonials
- Dive shop directory
- Gear comparison tool
- Mobile app

**Technical Debt:**
- Consider implementing proper sitemap.xml
- Add robots.txt if not present
- Consider implementing canonical URLs
- May want to add breadcrumb structured data later
